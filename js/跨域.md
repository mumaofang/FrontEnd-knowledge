1. cors 服务端设置
// Node.js Express 示例
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*'); // 或指定域名
  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE');
  res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');
  res.header('Access-Control-Allow-Credentials', 'true'); // 允许携带cookie
  
  // 预检请求处理
  if (req.method === 'OPTIONS') {
    return res.sendStatus(200);
  }
  next();
});
2. 代理服务器
// webpack devServer 配置
devServer: {
  proxy: {
    '/api': {
      target: 'http://localhost:3000',
      changeOrigin: true,
      pathRewrite: { '^/api': '' }
    }
  }
}

// 或使用 Nginx 代理
// location /api/ {
//   proxy_pass http://backend-server/;
//   proxy_set_header Host $host;
// }
3. jsonp
// 前端
function handleResponse(data) {
  console.log(data);
}

const script = document.createElement('script');
script.src = 'http://other-domain.com/api?callback=handleResponse';
document.body.appendChild(script);

// 后端返回格式
// handleResponse({"data": "some data"});
4. WebSocket
const ws = new WebSocket('ws://other-domain.com');
5. postMessage
// 发送方
otherWindow.postMessage('message', 'https://target-domain.com');

// 接收方
window.addEventListener('message', (event) => {
  if (event.origin !== 'https://trusted-domain.com') return;
  console.log(event.data);
});